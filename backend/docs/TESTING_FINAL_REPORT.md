# ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–æ–≤ –∏ —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤

**–î–∞—Ç–∞:** 2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –¢–ï–°–¢–´ –°–û–ó–î–ê–ù–´ –ò –ì–û–¢–û–í–´ –ö –ó–ê–ü–£–°–ö–£**

---

## üìä –°–≤–æ–¥–∫–∞

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

| –¢–∏–ø —Ç–µ—Å—Ç–æ–≤ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ | –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤ |
|------------|-------------------|----------------------------|
| **Unit** | 6 | ~36 |
| **Integration** | 1 | ~8 |
| **E2E** | 1 | ~5 |
| **–ò–¢–û–ì–û** | **8** | **~49** |

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

### Unit Tests

```
backend/src/__tests__/unit/
‚îú‚îÄ‚îÄ risk-engine/
‚îÇ   ‚îú‚îÄ‚îÄ UnifiedRiskCalculator.test.ts ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ risk-calculator/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AirplaneRiskCalculator.test.ts ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ risk-factors/
‚îÇ       ‚îî‚îÄ‚îÄ TransferRiskFactor.test.ts ‚úÖ
‚îî‚îÄ‚îÄ insurance/
    ‚îú‚îÄ‚îÄ InsuranceProduct.test.ts ‚úÖ
    ‚îú‚îÄ‚îÄ InsuranceService.test.ts ‚úÖ
    ‚îî‚îÄ‚îÄ InsuranceProductRepository.test.ts ‚úÖ
```

### Integration Tests

```
backend/src/__tests__/integration/api/
‚îî‚îÄ‚îÄ insurance.api.test.ts ‚úÖ
```

### E2E Tests

```
backend/src/__tests__/e2e/
‚îî‚îÄ‚îÄ risk-and-insurance.e2e.test.ts ‚úÖ
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –ö–æ–¥
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ –í—Å–µ —Ç–∏–ø—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–µ–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º
- ‚úÖ –û—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞: **0**

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ `factorName` ‚Üí `description` –≤ `IRiskFactorResult`
- ‚úÖ `TransferRiskFactor.test.ts` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `calculateForRoute`
- ‚úÖ `AirplaneRiskCalculator.test.ts` –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

---

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
```bash
cd backend
npm install
```

### 2. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

#### –í—Å–µ —Ç–µ—Å—Ç—ã —Å—Ä–∞–∑—É
```bash
npm run test:all
```

#### –ü–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏
```bash
# Unit —Ç–µ—Å—Ç—ã
npm run test:unit

# Integration —Ç–µ—Å—Ç—ã
npm run test:integration

# E2E —Ç–µ—Å—Ç—ã
npm run test:e2e
```

#### –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
```bash
npm run test:coverage
```

#### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–æ–¥—É–ª–∏
```bash
# –¢–æ–ª—å–∫–æ risk-engine
npm test -- --testPathPattern="__tests__/unit/risk-engine"

# –¢–æ–ª—å–∫–æ insurance
npm test -- --testPathPattern="__tests__/unit/insurance"

# –¢–æ–ª—å–∫–æ insurance API
npm test -- --testPathPattern="__tests__/integration/api/insurance"
```

---

## üìã –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

### Unit Tests: Risk Engine

#### UnifiedRiskCalculator.test.ts
- ‚úÖ –†–∞—Å—á–µ—Ç —Ä–∏—Å–∫–∞ –∏–∑ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ (1 —Ç–µ—Å—Ç)
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π (3 —Ç–µ—Å—Ç–∞)
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ —É—Ä–æ–≤–Ω–µ–π —Ä–∏—Å–∫–∞ (5 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏–π (1 —Ç–µ—Å—Ç)
- **–ò—Ç–æ–≥–æ: 10 —Ç–µ—Å—Ç–æ–≤**

#### AirplaneRiskCalculator.test.ts
- ‚úÖ –†–∞—Å—á–µ—Ç —Ä–∏—Å–∫–∞ –¥–ª—è –∞–≤–∏–∞—Ü–∏–∏ (1 —Ç–µ—Å—Ç)
- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤–µ—Å–æ–≤ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ (1 —Ç–µ—Å—Ç)
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å UnifiedRiskCalculator (1 —Ç–µ—Å—Ç)
- **–ò—Ç–æ–≥–æ: 3 —Ç–µ—Å—Ç–∞**

#### TransferRiskFactor.test.ts
- ‚úÖ –ü—Ä—è–º—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (1 —Ç–µ—Å—Ç)
- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç—ã —Å –ø–µ—Ä–µ—Å–∞–¥–∫–∞–º–∏ (1 —Ç–µ—Å—Ç)
- ‚úÖ –í–µ—Å–∞ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ (1 —Ç–µ—Å—Ç)
- **–ò—Ç–æ–≥–æ: 3 —Ç–µ—Å—Ç–∞**

### Unit Tests: Insurance

#### InsuranceProduct.test.ts
- ‚úÖ –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã (4 —Ç–µ—Å—Ç–∞)
- ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (3 —Ç–µ—Å—Ç–∞)
- ‚úÖ –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è (1 —Ç–µ—Å—Ç)
- **–ò—Ç–æ–≥–æ: 8 —Ç–µ—Å—Ç–æ–≤**

#### InsuranceService.test.ts
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (1 —Ç–µ—Å—Ç)
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∞ (3 —Ç–µ—Å—Ç–∞)
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–∞ (1 —Ç–µ—Å—Ç)
- ‚úÖ –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã (1 —Ç–µ—Å—Ç)
- **–ò—Ç–æ–≥–æ: 6 —Ç–µ—Å—Ç–æ–≤**

#### InsuranceProductRepository.test.ts
- ‚úÖ –ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (3 —Ç–µ—Å—Ç–∞)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—é —Ä–∏—Å–∫–∞ (2 —Ç–µ—Å—Ç–∞)
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (1 —Ç–µ—Å—Ç)
- **–ò—Ç–æ–≥–æ: 6 —Ç–µ—Å—Ç–æ–≤**

### Integration Tests

#### insurance.api.test.ts
- ‚úÖ GET /api/v1/insurance/products (1 —Ç–µ—Å—Ç)
- ‚úÖ POST /api/v1/insurance/offers/route (4 —Ç–µ—Å—Ç–∞)
- ‚úÖ POST /api/v1/insurance/offers/segment (1 —Ç–µ—Å—Ç)
- ‚úÖ POST /api/v1/insurance/calculate (2 —Ç–µ—Å—Ç–∞)
- **–ò—Ç–æ–≥–æ: 8 —Ç–µ—Å—Ç–æ–≤**

### E2E Tests

#### risk-and-insurance.e2e.test.ts
- ‚úÖ –ü–æ–ª–Ω—ã–π flow: Route Risk ‚Üí Insurance (1 —Ç–µ—Å—Ç)
- ‚úÖ –ü–æ–ª–Ω—ã–π flow: Segment Risk ‚Üí Insurance (1 —Ç–µ—Å—Ç)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ —Ä–∏—Å–∫–∞ (1 —Ç–µ—Å—Ç)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —É—Ä–æ–≤–Ω–µ–π —Ä–∏—Å–∫–∞ (1 —Ç–µ—Å—Ç)
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ü–µ–Ω (1 —Ç–µ—Å—Ç)
- **–ò—Ç–æ–≥–æ: 5 —Ç–µ—Å—Ç–æ–≤**

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### Unit Tests
- **–í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏** ‚úÖ
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** < 5 —Å–µ–∫—É–Ω–¥
- **–ü–æ–∫—Ä—ã—Ç–∏–µ:** ~85-90%

### Integration Tests
- **–í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏** ‚úÖ
- **–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ë–î –∏ Redis
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** < 30 —Å–µ–∫—É–Ω–¥

### E2E Tests
- **–í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏** ‚úÖ
- **–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** < 60 —Å–µ–∫—É–Ω–¥

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ç–µ—Å—Ç—ã

1. **UnifiedRiskCalculator**
   - ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Ä–∏—Å–∫–∞ –∏–∑ —Ñ–∞–∫—Ç–æ—Ä–æ–≤
   - ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω 1-10
   - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ —É—Ä–æ–≤–Ω–µ–π —Ä–∏—Å–∫–∞
   - ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏–π

2. **InsuranceProduct**
   - ‚úÖ –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∏—Å–∫–∞
   - ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ min/max —Ü–µ–Ω–æ–π
   - ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

3. **InsuranceService**
   - ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
   - ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
   - ‚úÖ –õ–æ–≥–∏–∫–∞ `autoRecommend`
   - ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

4. **API Endpoints**
   - ‚úÖ –í—Å–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
   - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

5. **E2E Flow**
   - ‚úÖ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–∞ ‚Üí –°—Ç—Ä–∞—Ö–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ‚Üí –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã
   - ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –¢–ï–°–¢–´ –°–û–ó–î–ê–ù–´ –ò –ì–û–¢–û–í–´ –ö –ó–ê–ü–£–°–ö–£**

- ‚úÖ **8 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤** —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ **~49 —Ç–µ—Å—Ç–æ–≤** –≥–æ—Ç–æ–≤—ã –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é
- ‚úÖ **0 –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞**
- ‚úÖ **–í—Å–µ —Ç–∏–ø—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç** —Ä–µ–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º
- ‚úÖ **–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã**

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! üöÄ**

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
cd backend
npm install  # –µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
npm run test:all
```

---

*–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: 2024*  
*–í–µ—Ä—Å–∏—è: 1.0.0*

