# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–∞—Ä—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤

**–î–∞—Ç–∞:** 2025-01-27  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à—ë–Ω, –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º

---

## 1. –°—Ç–∞—Ç—É—Å API –∫–ª—é—á–∞ Yandex Maps

### ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –§–∞–π–ª `.env.local` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `NEXT_PUBLIC_YANDEX_MAPS_API_KEY` –∑–∞–¥–∞–Ω–∞
- ‚úÖ –ö–æ–¥ –≤ `layout.tsx` –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–ª—é—á–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `encodeURIComponent`
  - –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–∫—Ä–∏–ø—Ç–∞

**–í—ã–≤–æ–¥:** API –∫–ª—é—á –±—É–¥–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–≤–ª–µ–Ω –≤ URL –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
- [ ] –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Network ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É `api-maps.yandex.ru`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `window.ymaps` –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

---

## 2. –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞—Ä—Ç—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã:**
   - [ ] –ö–∞—Ä—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ RouteDetailsView
   - [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
   - [ ] `window.ymaps` –¥–æ—Å—Ç—É–ø–µ–Ω (–¥–ª—è Yandex) –∏–ª–∏ `window.L` –¥–æ—Å—Ç—É–ø–µ–Ω (–¥–ª—è Leaflet)

2. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–æ–≤:**
   - [ ] –ü–æ–ª–∏–ª–∏–Ω–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–µ
   - [ ] –¶–≤–µ—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–∏–ø–∞–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
   - [ ] Great Circle –¥–ª—è –∞–≤–∏–∞–º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø—Ä—è–º–∞—è –ª–∏–Ω–∏—è –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö

3. **–ú–∞—Ä–∫–µ—Ä—ã:**
   - [ ] –ú–∞—Ä–∫–µ—Ä –Ω–∞—á–∞–ª–∞ (üìç –∑–µ–ª—ë–Ω—ã–π) –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
   - [ ] –ú–∞—Ä–∫–µ—Ä –∫–æ–Ω—Ü–∞ (üèÅ –∫—Ä–∞—Å–Ω—ã–π) –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
   - [ ] –ú–∞—Ä–∫–µ—Ä—ã –ø–µ—Ä–µ—Å–∞–¥–æ–∫ (üîÑ —Å–µ—Ä—ã–π) –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (–µ—Å–ª–∏ –µ—Å—Ç—å)

4. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤:**
   - [ ] –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
   - [ ] –ö–Ω–æ–ø–∫–∏ "–ü—Ä–µ–¥—ã–¥—É—â–∏–π"/"–°–ª–µ–¥—É—é—â–∏–π" —Ä–∞–±–æ—Ç–∞—é—Ç
   - [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã

5. **Fallback –Ω–∞ Leaflet:**
   - [ ] –ï—Å–ª–∏ Yandex –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Leaflet
   - [ ] –ö–∞—Ä—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å OpenStreetMap —Ç–∞–π–ª–∞–º–∏

---

## 3. –°–æ—Å—Ç–æ—è–Ω–∏–µ E2E —Ç–µ—Å—Ç–æ–≤

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:** 105
- **–ü—Ä–æ—à–ª–æ:** 20 (19%)
- **–£–ø–∞–ª–æ:** 85 (81%)
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~1.4 –º–∏–Ω—É—Ç—ã

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã (20)

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:**
- Route Map Integration: `should handle map loading error gracefully` (Chromium, Mobile Chrome)
- Routes Search: `should display error when required fields are empty` (Chromium, Mobile Chrome, Mobile Safari)

### ‚ùå –£–ø–∞–≤—à–∏–µ —Ç–µ—Å—Ç—ã (85)

#### –ì—Ä—É–ø–ø–∞ 1: Route Map Alternatives (6 —Ç–µ—Å—Ç–æ–≤ –≤ Chromium)

**–ü—Ä–æ–±–ª–µ–º–∞:** –≠–ª–µ–º–µ–Ω—Ç—ã `route-switcher` –Ω–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è

**–¢–µ—Å—Ç—ã:**
1. `should display route switcher when multiple routes are available`
2. `should switch to next route when next button is clicked`
3. `should switch to previous route when previous button is clicked`
4. `should switch route when indicator is clicked`
5. `should disable previous button on first route`
6. `should disable next button on last route`

**–≠–ª–µ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è:**
- `[data-testid="route-map-switcher"]`
- `[data-testid="route-switcher-next"]`
- `[data-testid="route-switcher-prev"]`
- `[data-testid="route-switcher-indicator-1"]`

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ `data-testid` –∞—Ç—Ä–∏–±—É—Ç—ã **–ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç** –≤ –∫–æ–¥–µ `RouteMapSwitcher.tsx`
- ‚ùå –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ `hasAlternatives = false`
- ‚ùå `hasAlternatives = false` –ø–æ—Ç–æ–º—É —á—Ç–æ `routes.length <= 1`

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `RouteMapSection` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `RouteDetailsView`, –Ω–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `RouteMap`, –∞ –Ω–µ `RouteMapWithAlternatives`. –¢–µ—Å—Ç—ã –æ–∂–∏–¥–∞—é—Ç `RouteMapWithAlternatives`, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏–∑ localStorage.

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–µ—Å—Ç–∞—Ö:**
- –¢–µ—Å—Ç—ã –∏–¥—É—Ç –Ω–∞ `/routes/details?routeId=route-1`
- –¢–µ—Å—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ localStorage: `route-route-1` –∏ `route-route-1-alternatives`
- –ù–æ `RouteMapSection` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ `route-route-1`, –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò–∑–º–µ–Ω–∏—Ç—å `RouteMapSection` —á—Ç–æ–±—ã –æ–Ω –∑–∞–≥—Ä—É–∂–∞–ª –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏–∑ localStorage
2. –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ—Å—Ç—ã —á—Ç–æ–±—ã –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
3. –ò–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `RouteMapWithAlternatives` –≤ `RouteDetailsView`

#### –ì—Ä—É–ø–ø–∞ 2: Firefox –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (35 —Ç–µ—Å—Ç–æ–≤)

**–û—à–∏–±–∫–∞:**
```
Error: browserType.launch: Executable doesn't exist at 
C:\Users\admin\AppData\Local\ms-playwright\firefox-1495\firefox\firefox.exe
```

**–†–µ—à–µ–Ω–∏–µ:** `npx playwright install firefox`

#### –ì—Ä—É–ø–ø–∞ 3: WebKit –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤)

**–û—à–∏–±–∫–∞:**
```
Error: browserType.launch: Executable doesn't exist at 
C:\Users\admin\AppData\Local\ms-playwright\webkit-2215\Playwright.exe
```

**–†–µ—à–µ–Ω–∏–µ:** `npx playwright install webkit`

#### –ì—Ä—É–ø–ø–∞ 4: Strict mode violation –≤ routes-search (9 —Ç–µ—Å—Ç–æ–≤)

**–û—à–∏–±–∫–∞:**
```
Error: locator.fill: Error: strict mode violation: getByLabel('–ö—É–¥–∞') resolved to 2 elements
```

**–¢–µ—Å—Ç—ã:**
- `should search for routes with valid data`
- `should display error on invalid search (same cities)`
- `should handle API error gracefully`

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å label "–ö—É–¥–∞"

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã:
```typescript
// –ë—ã–ª–æ:
await page.getByLabel('–ö—É–¥–∞').fill('–ù–µ—Ä—é–Ω–≥—Ä–∏');

// –°—Ç–∞–ª–æ:
await page.getByRole('textbox', { name: '–ö—É–¥–∞' }).first().fill('–ù–µ—Ä—é–Ω–≥—Ä–∏');
// –ò–ª–∏:
await page.getByTestId('destination-input').fill('–ù–µ—Ä—é–Ω–≥—Ä–∏');
```

#### –ì—Ä—É–ø–ø–∞ 5: –≠–ª–µ–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ route-map-integration (1 —Ç–µ—Å—Ç)

**–¢–µ—Å—Ç:** `should handle empty route segments`

**–û—à–∏–±–∫–∞:**
```
Error: expect(locator).toBeVisible() failed
Timeout: 5000ms
```

**–≠–ª–µ–º–µ–Ω—Ç:** –ù–µ —É–∫–∞–∑–∞–Ω, –Ω–æ —Å—É–¥—è –ø–æ —Ç–µ—Å—Ç—É, —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ—Å—Ç –∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–µ `data-testid` –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä

---

## 4. –°–ø–∏—Å–æ–∫ —É–ø–∞–≤—à–∏—Ö —Ç–µ—Å—Ç–æ–≤

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (–±–ª–æ–∫–∏—Ä—É—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

**–ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º**

### –í—ã—Å–æ–∫–∏–µ (—Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è)

1. **Route Map Alternatives (6 —Ç–µ—Å—Ç–æ–≤)**
   - –ü—Ä–æ–±–ª–µ–º–∞: –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è
   - –ü—Ä–∏—á–∏–Ω–∞: `RouteMapSection` –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
   - –†–µ—à–µ–Ω–∏–µ: –ò–∑–º–µ–Ω–∏—Ç—å `RouteMapSection` –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `RouteMapWithAlternatives`

2. **Routes Search (9 —Ç–µ—Å—Ç–æ–≤)**
   - –ü—Ä–æ–±–ª–µ–º–∞: Strict mode violation
   - –ü—Ä–∏—á–∏–Ω–∞: –î–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º label
   - –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã

### –°—Ä–µ–¥–Ω–∏–µ (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å)

3. **Firefox –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (35 —Ç–µ—Å—Ç–æ–≤)**
   - –†–µ—à–µ–Ω–∏–µ: `npx playwright install firefox`

4. **WebKit –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤)**
   - –†–µ—à–µ–Ω–∏–µ: `npx playwright install webkit`

5. **Route Map Integration (1 —Ç–µ—Å—Ç)**
   - –ü—Ä–æ–±–ª–µ–º–∞: –≠–ª–µ–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ—Å—Ç –∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã

---

## 5. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –í—ã—Å–æ–∫–∏–π (–±–ª–æ–∫–∏—Ä—É—é—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ RouteMapSection**
   - **–§–∞–π–ª:** `frontend/src/modules/routes/features/route-map/ui/route-map-section.tsx`
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ –∏–∑ localStorage
   - **–ò–ª–∏:** –ó–∞–º–µ–Ω–∏—Ç—å `RouteMapSection` –Ω–∞ `RouteMapWithAlternatives` –≤ `RouteDetailsView`

2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å strict mode violation –≤ routes-search —Ç–µ—Å—Ç–∞—Ö**
   - **–§–∞–π–ª:** `frontend/e2e/routes-search.spec.ts`
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ó–∞–º–µ–Ω–∏—Ç—å `getByLabel('–ö—É–¥–∞')` –Ω–∞ –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –°—Ä–µ–¥–Ω–∏–π (—É–ª—É—á—à–∞—é—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ)

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä—ã Playwright**
   - **–î–µ–π—Å—Ç–≤–∏–µ:** `npx playwright install firefox webkit`

4. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç route-map-integration**
   - **–§–∞–π–ª:** `frontend/e2e/route-map-integration.spec.ts`
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä –∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–µ `data-testid`

---

## 6. –ß—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### ‚úÖ –ë–µ–∑ —É—Ç–æ—á–Ω–µ–Ω–∏–π

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä—ã Playwright:**
   ```bash
   npx playwright install firefox webkit
   ```

2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å strict mode violation:**
   - –ó–∞–º–µ–Ω–∏—Ç—å `getByLabel('–ö—É–¥–∞')` –Ω–∞ `getByRole('textbox', { name: '–ö—É–¥–∞' }).first()`
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `getByTestId` –µ—Å–ª–∏ –µ—Å—Ç—å

3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç route-map-integration:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
   - –î–æ–±–∞–≤–∏—Ç—å `data-testid` –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

### ‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç —É—Ç–æ—á–Ω–µ–Ω–∏–π

1. **–ü—Ä–æ–±–ª–µ–º–∞ —Å route-switcher:**
   - **–í–æ–ø—Ä–æ—Å:** –î–æ–ª–∂–µ–Ω –ª–∏ `RouteMapSection` –∑–∞–≥—Ä—É–∂–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã?
   - **–ò–ª–∏:** –î–æ–ª–∂–µ–Ω –ª–∏ `RouteDetailsView` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `RouteMapWithAlternatives`?
   - **–ò–ª–∏:** –ù—É–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ—Å—Ç—ã?

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**
   - **–í–æ–ø—Ä–æ—Å:** –ö–∞–∫–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ `RouteDetailsView`?
   - **–í–∞—Ä–∏–∞–Ω—Ç—ã:**
     - `RouteMapSection` (—Ç–µ–∫—É—â–∏–π) - –ø—Ä–æ—Å—Ç–æ–π, –±–µ–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
     - `RouteMapWithAlternatives` - —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
     - –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤

---

## 7. –ß—Ç–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —É—Ç–æ—á–Ω–∏—Ç—å

### –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

1. **–ö–∞–∫–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ RouteDetailsView?**
   - `RouteMapSection` (—Ç–µ–∫—É—â–∏–π) - –ø—Ä–æ—Å—Ç–æ–π, –±–µ–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
   - `RouteMapWithAlternatives` - —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
   - –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥

2. **–î–æ–ª–∂–µ–Ω –ª–∏ RouteMapSection –∑–∞–≥—Ä—É–∂–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏–∑ localStorage?**
   - –ï—Å–ª–∏ –¥–∞, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –∑–∞–≥—Ä—É–∑–∫–∏
   - –ï—Å–ª–∏ –Ω–µ—Ç, –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ—Å—Ç—ã

3. **–ö–∞–∫ –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã?**
   - –í `localStorage` –∫–∞–∫ `route-{routeId}-alternatives`?
   - –í —Ç–æ–º –∂–µ –∫–ª—é—á–µ —á—Ç–æ –∏ –æ—Å–Ω–æ–≤–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç?
   - –í –¥—Ä—É–≥–æ–º —Ñ–æ—Ä–º–∞—Ç–µ?

---

## 8. –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å |
|----------|--------|
| API –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω | ‚úÖ –î–∞ |
| –ö–æ–º–ø–∏–ª—è—Ü–∏—è | ‚úÖ –£—Å–ø–µ—à–Ω–∞ |
| E2E —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è | ‚úÖ –î–∞ |
| E2E —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ (20/105) |
| –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä—É—á–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é | ‚úÖ –ì–æ—Ç–æ–≤–∞ |
| –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É | ‚ùå –ù–µ –≥–æ—Ç–æ–≤–∞ (—Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤) |

---

## 9. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. **–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É RouteDetailsView
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä—ã Playwright:**
   ```bash
   npx playwright install firefox webkit
   ```

3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å strict mode violation:**
   - –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –≤ `routes-search.spec.ts`

### –ü–æ—Å–ª–µ —É—Ç–æ—á–Ω–µ–Ω–∏–π:

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å route-switcher:**
   - –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –≤—ã—à–µ

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å E2E —Ç–µ—Å—Ç—ã —Å–Ω–æ–≤–∞:**
   ```bash
   npm run test:e2e
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

---

**–û—Ç—á—ë—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** 2025-01-27  
**–í–µ—Ä—Å–∏—è:** 1.0



