# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Leaflet-–∫–∞—Ä—Ç—ã

## –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

‚úÖ **–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω**  
‚úÖ **–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**  
‚úÖ **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤—ã—è–≤–ª–µ–Ω—ã**  
‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω—ã**

---

## 1. –ü–†–û–í–ï–†–ö–ê –¶–ï–ü–û–ß–ö–ò –ö–û–ú–ü–û–ù–ï–ù–¢–û–í

### ‚úÖ RouteDetailsView ‚Üí RouteMapWithAlternatives

**–§–∞–π–ª:** `route-details-view.tsx`, —Å—Ç—Ä–æ–∫–∞ 136  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ `providerType="leaflet"` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —è–≤–Ω–æ
- ‚úÖ `primaryRouteId` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ `height="500px"` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### ‚úÖ RouteMapWithAlternatives ‚Üí RouteMapSwitcher

**–§–∞–π–ª:** `route-map-with-alternatives.tsx`, —Å—Ç—Ä–æ–∫–∏ 60-163  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ `providerType` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ `RouteMapSwitcher` (—Å—Ç—Ä–æ–∫–∞ 162)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏–∑ localStorage —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏—è loading –∏ empty –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- ‚ö†Ô∏è –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–∂–µ—Ç –±—ã—Ç—å race condition –º–µ–∂–¥—É –∑–∞–≥—Ä—É–∑–∫–æ–π –∏–∑ localStorage –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º –∫–∞—Ä—Ç—ã

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Å –∑–∞–º–µ—á–∞–Ω–∏–µ–º)

---

### ‚úÖ RouteMapSwitcher ‚Üí RouteMap

**–§–∞–π–ª:** `route-map-switcher.tsx`, —Å—Ç—Ä–æ–∫–∏ 58-184  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ `providerType` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ `RouteMap` (—Å—Ç—Ä–æ–∫–∞ 171)
- ‚úÖ `key` –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π `route-map-${providerType}` (—Å—Ç—Ä–æ–∫–∞ 172)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `currentRoute` –Ω–∞ `null` –¥–æ–±–∞–≤–ª–µ–Ω–∞ (—Å—Ç—Ä–æ–∫–∞ 166)
- ‚úÖ `currentRoute` –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `useMemo` (—Å—Ç—Ä–æ–∫–∏ 67-73)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### ‚úÖ RouteMap ‚Üí LeafletMapProvider

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 190-201  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ `LeafletMapProvider` —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ `providerType === 'leaflet'` (—Å—Ç—Ä–æ–∫–∞ 197)
- ‚úÖ –ü—Ä–æ–≤–∞–π–¥–µ—Ä –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ `useMemo` (—Å—Ç—Ä–æ–∫–∏ 191-201)
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã: `[externalMapProvider, providerType]`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## 2. –ü–†–û–í–ï–†–ö–ê –ó–ê–ì–†–£–ó–ö–ò CSS

### ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ Leaflet CSS

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 163-188  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ `<link>` –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º (—Å—Ç—Ä–æ–∫–∞ 170)
- ‚úÖ `setIsLeafletCssLoaded(true)` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ DOM (—Å—Ç—Ä–æ–∫–∞ 187)
- ‚úÖ –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `onload` —Å–æ–±—ã—Ç–∏—è

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø:** –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –¥—É–±–ª–∏–∫–∞—Ç `<link>` —ç–ª–µ–º–µ–Ω—Ç–∞, –µ—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ —ç—Ñ—Ñ–µ–∫—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–ê–Ω–∞–ª–∏–∑:**
- –≠—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS (—Å—Ç—Ä–æ–∫–∏ 163-188) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `providerType`
- –≠—Ñ—Ñ–µ–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 204-356) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ CSS –ø–µ—Ä–µ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
- –ï—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å race condition

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

## 3. –ü–†–û–í–ï–†–ö–ê –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò –ö–ê–†–¢–´

### ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è LeafletMapProvider

**–§–∞–π–ª:** `leaflet-map-provider.ts`, —Å—Ç—Ä–æ–∫–∏ 71-170  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç Leaflet —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Å—Ç—Ä–æ–∫–∞ 84)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `L` –Ω–∞ `undefined` –¥–æ–±–∞–≤–ª–µ–Ω–∞ (—Å—Ç—Ä–æ–∫–∏ 90-95)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω–æ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 251-279  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ `checkContainerSize()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –µ–≥–æ —Ä–∞–∑–º–µ—Ä—ã
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ 10 –ø–æ–ø—ã—Ç–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–æ (—Å—Ç—Ä–æ–∫–∏ 263-264)
- ‚úÖ –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ `setTimeout(initMap, 100)` –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- ‚ö†Ô∏è **–°–†–ï–î–ù–Ø–Ø:** –ó–∞–¥–µ—Ä–∂–∫–∞ 50ms –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –≤—ã–∑–æ–≤–æ–º `initMap` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (—Å—Ç—Ä–æ–∫–∞ 345)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Å –∑–∞–º–µ—á–∞–Ω–∏–µ–º)

---

### ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥—Ä–∞–Ω–∏—Ü –∫–∞—Ä—Ç—ã

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 358-369  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `isMapReady` –∏ `isInitialized()` –¥–æ–±–∞–≤–ª–µ–Ω–∞
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã: `[bounds, boundsValid, isMapReady]`
- ‚úÖ `setBounds` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫–∞—Ä—Ç—ã

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## 4. –ü–†–û–í–ï–†–ö–ê –†–ï–ù–î–ï–†–ò–ù–ì–ê –ü–û–õ–ò–õ–ò–ù–ò–ô –ò –ú–ê–†–ö–ï–†–û–í

### ‚úÖ –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–æ–ª–∏–ª–∏–Ω–∏–π

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 390-427  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `isMapReady` –∏ `isInitialized()` –¥–æ–±–∞–≤–ª–µ–Ω–∞ (—Å—Ç—Ä–æ–∫–∏ 397-398)
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø–æ–ª–∏–ª–∏–Ω–∏–π –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö (—Å—Ç—Ä–æ–∫–∏ 403-407)
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã: `[visibleSegments, selectedSegmentId, isMapReady]`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### ‚úÖ –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –º–∞—Ä–∫–µ—Ä–æ–≤

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 429-466  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `isMapReady` –∏ `isInitialized()` –¥–æ–±–∞–≤–ª–µ–Ω–∞ (—Å—Ç—Ä–æ–∫–∏ 436-437)
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö (—Å—Ç—Ä–æ–∫–∏ 442-446)
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã: `[mapData, isMapReady]`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## 5. –ü–†–û–í–ï–†–ö–ê –û–ë–†–ê–ë–û–¢–ö–ò –û–®–ò–ë–û–ö

### ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ UI

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 513-549  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –ë–ª–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω (—Å—Ç—Ä–æ–∫–∏ 513-549)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞" —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å—Ç—Ä–æ–∫–∏ 521-534)
- ‚úÖ –û—à–∏–±–∫–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ `isMapReady` —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 327-341, 330-340  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `LeafletMapProvider` –¥–æ–±–∞–≤–ª–µ–Ω–æ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## 6. –ü–†–û–í–ï–†–ö–ê –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –ú–ê–†–®–†–£–¢–û–í

### ‚úÖ Key –≤ RouteMapSwitcher

**–§–∞–π–ª:** `route-map-switcher.tsx`, —Å—Ç—Ä–æ–∫–∞ 172  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ `key` –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π `route-map-${providerType}`
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞
- ‚úÖ `route` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ–ø—Å—ã

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 112-121  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ `useRouteMapData` –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `route`
- ‚úÖ –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ React Query

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## 7. –í–´–Ø–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø: –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ CSS

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 163-188, 217-249  
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –≠—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS (—Å—Ç—Ä–æ–∫–∏ 163-188) –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –ø–æ—Å–ª–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 204-356)
- –ï—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç CSS –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–±–∞–≤–∏–ª `<link>`, –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ CSS
- –ü—Ä–∏ —ç—Ç–æ–º —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –≤—Ç–æ—Ä–æ–π `<link>` —ç–ª–µ–º–µ–Ω—Ç, –µ—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ–≤—Ä–µ–º—è

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
- Race condition –º–µ–∂–¥—É –¥–≤—É–º—è —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç `providerType`
- –≠—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS –Ω–µ –∏–º–µ–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `<link>` –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö

**–¢–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ:**
- `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 176-187: —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ `<link>` –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –¥—Ä—É–≥–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–ö–∞–∫ —ç—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç Leaflet:**
- –î—É–±–ª–∏–∫–∞—Ç—ã CSS –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å—Ç–∏–ª–µ–π
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ CSS –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–ª—å—à–µ, —á–µ–º –Ω—É–∂–Ω–æ
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–¥–µ—Ä–∂–∞—Ç—å—Å—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

---

### üü° –í–´–°–û–ö–ê–Ø: Race condition –º–µ–∂–¥—É –∑–∞–≥—Ä—É–∑–∫–æ–π CSS –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 163-188, 217-249  
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –≠—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `isLeafletCssLoaded = true` —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ DOM (—Å—Ç—Ä–æ–∫–∞ 187)
- –≠—Ñ—Ñ–µ–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ CSS –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª, –µ—Å–ª–∏ CSS –Ω–µ –Ω–∞–π–¥–µ–Ω (—Å—Ç—Ä–æ–∫–∏ 219-242)
- –ï—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ä–∞–Ω—å—à–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ CSS, –∏–Ω—Ç–µ—Ä–≤–∞–ª –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ CSS —É–∂–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
- –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω
- –≠—Ñ—Ñ–µ–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç, —á—Ç–æ CSS –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

**–¢–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ:**
- `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 217-249: –ø—Ä–æ–≤–µ—Ä–∫–∞ CSS –≤ —ç—Ñ—Ñ–µ–∫—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –∑–∞–≥—Ä—É–∑–∫–∏ CSS

**–ö–∞–∫ —ç—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç Leaflet:**
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–ª—å—à–µ, —á–µ–º –Ω—É–∂–Ω–æ
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–¥–µ—Ä–∂–∞—Ç—å—Å—è –Ω–∞ 5 —Å–µ–∫—É–Ω–¥, –¥–∞–∂–µ –µ—Å–ª–∏ CSS —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

---

### üü° –í–´–°–û–ö–ê–Ø: –ó–∞–¥–µ—Ä–∂–∫–∞ 50ms –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∞ 345  
**–ü—Ä–æ–±–ª–µ–º–∞:**
- `setTimeout(initMap, 50)` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –µ—â—ë –Ω–µ –≥–æ—Ç–æ–≤ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ `checkContainerSize()`

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

**–¢–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ:**
- `route-map.tsx`, —Å—Ç—Ä–æ–∫–∞ 345: `const timeoutId = setTimeout(initMap, 50);`

**–ö–∞–∫ —ç—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç Leaflet:**
- –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –±–æ–ª—å—à–µ –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- –ù–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –æ—à–∏–±–∫–∞ –ø–æ—Å–ª–µ 10 –ø–æ–ø—ã—Ç–æ–∫

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

---

### üü° –°–†–ï–î–ù–Ø–Ø: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ CSS –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 163-188  
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `<link>` (—Å—Ç—Ä–æ–∫–∞ 170)
- –ù–æ –µ—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å –≤–æ–≤—Ä–µ–º—è

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
- –ù–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º `<link>`

**–¢–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ:**
- `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 176-187: —Å–æ–∑–¥–∞–Ω–∏–µ `<link>` –±–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ö–∞–∫ —ç—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç Leaflet:**
- –ú–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –¥—É–±–ª–∏–∫–∞—Ç—ã CSS
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å—Ç–∏–ª–µ–π

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### üü° –°–†–ï–î–ù–Ø–Ø: –ö–Ω–æ–ø–∫–∞ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞" –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS

**–§–∞–π–ª:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 521-534  
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞" —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è `initError` –∏ `isMapReady`
- –ù–æ —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –µ—Å–ª–∏ CSS –Ω–µ –±—ã–ª –∑–∞–≥—Ä—É–∂–µ–Ω

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
- –≠—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç `providerType`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è

**–¢–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ:**
- `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 521-534: –∫–Ω–æ–ø–∫–∞ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞" –Ω–µ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É CSS

**–ö–∞–∫ —ç—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç Leaflet:**
- –ï—Å–ª–∏ CSS –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è, –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –Ω–µ –ø–æ–º–æ–∂–µ—Ç

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### üü¢ –ù–ò–ó–ö–ê–Ø: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∞–π–ª–æ–≤ OpenStreetMap

**–§–∞–π–ª:** `leaflet-map-provider.ts`, —Å—Ç—Ä–æ–∫–∏ 128-132  
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –¢–∞–π–ª—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Ö –∑–∞–≥—Ä—É–∑–∫–∏
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∞–π–ª–æ–≤

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
- Leaflet –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∞–π–ª–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–æ –Ω–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô

---

## 8. –°–ü–ò–°–û–ö –¢–û–ß–ï–ß–ù–´–• –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### 1. –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï: –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ CSS

**–§–∞–π–ª:** `route-map.tsx`  
**–°—Ç—Ä–æ–∫–∏:** 163-188

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å:**
- –î–æ–±–∞–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º `<link>` —ç–ª–µ–º–µ–Ω—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `document.querySelector('link[data-leaflet-css]')` –ø–µ—Ä–µ–¥ `document.createElement('link')`
- –ï—Å–ª–∏ `<link>` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ cleanup —Ñ—É–Ω–∫—Ü–∏—é —ç—Ñ—Ñ–µ–∫—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ CSS

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

---

### 2. –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ CSS –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–§–∞–π–ª:** `route-map.tsx`  
**–°—Ç—Ä–æ–∫–∏:** 163-188, 217-249

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å:**
- –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ CSS –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ CSS –≤ –æ–¥–∏–Ω —ç—Ñ—Ñ–µ–∫—Ç
- –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç `isLeafletCssLoaded` (—É–∂–µ –µ—Å—Ç—å, –Ω–æ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é)
- –£–±—Ä–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ CSS, –µ—Å–ª–∏ CSS —É–∂–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º —ç—Ñ—Ñ–µ–∫—Ç–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥ –∑–∞–≥—Ä—É–∑–∫–∏ CSS –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

---

### 3. –í–´–°–û–ö–ò–ô: –£–ª—É—á—à–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

**–§–∞–π–ª:** `route-map.tsx`  
**–°—Ç—Ä–æ–∫–∞:** 345

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å:**
- –£–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É —Å 50ms –¥–æ 100-150ms
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `requestAnimationFrame` –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–∞–¥—Ä–∞ —Ä–µ–Ω–¥–µ—Ä–∞
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º `checkContainerSize()`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

---

### 4. –í–´–°–û–ö–ò–ô: –£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É CSS –≤ —ç—Ñ—Ñ–µ–∫—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–§–∞–π–ª:** `route-map.tsx`  
**–°—Ç—Ä–æ–∫–∏:** 217-249

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å:**
- –£–±—Ä–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ CSS, –µ—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ `isLeafletCssLoaded` –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è, –µ—Å–ª–∏ CSS —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, —á—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

---

### 5. –°–†–ï–î–ù–ò–ô: –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑–∫–∏ CSS –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞"

**–§–∞–π–ª:** `route-map.tsx`  
**–°—Ç—Ä–æ–∫–∏:** 521-534

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å:**
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞" —Å–±—Ä–æ—Å–∏—Ç—å `isLeafletCssLoaded` –≤ `false`
- –≠—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS
- –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—ã–π —Ç—Ä–∏–≥–≥–µ—Ä –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ CSS

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

### 6. –°–†–ï–î–ù–ò–ô: –î–æ–±–∞–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ CSS

**–§–∞–π–ª:** `route-map.tsx`  
**–°—Ç—Ä–æ–∫–∏:** 163-188

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å:**
- –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º `<link>` –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —ç–ª–µ–º–µ–Ω—Ç —Å —Ç–µ–º –∂–µ `href`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `document.querySelector('link[href*="leaflet"]')` –¥–ª—è –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ cleanup —Ñ—É–Ω–∫—Ü–∏—é

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

---

## 9. –ü–†–ò–û–†–ò–¢–ï–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

1. ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ CSS (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1)
2. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ CSS –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2)

### –í—ã—Å–æ–∫–∏–µ (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö)

3. ‚úÖ –£–ª—É—á—à–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3)
4. ‚úÖ –£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É CSS –≤ —ç—Ñ—Ñ–µ–∫—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 4)

### –°—Ä–µ–¥–Ω–∏–µ (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

5. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑–∫–∏ CSS –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞" (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 5)
6. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ CSS (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 6)

---

## 10. –ò–¢–û–ì–û–í–´–ô –ê–ù–ê–õ–ò–ó

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

1. ‚úÖ –¶–µ–ø–æ—á–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: `RouteDetailsView ‚Üí RouteMapWithAlternatives ‚Üí RouteMapSwitcher ‚Üí RouteMap ‚Üí LeafletMapProvider`
2. ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ `providerType="leaflet"` —á–µ—Ä–µ–∑ –≤—Å—é —Ü–µ–ø–æ—á–∫—É
3. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è Leaflet —á–µ—Ä–µ–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫–∞—Ä—Ç—ã –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –ø–æ–ª–∏–ª–∏–Ω–∏–π –∏ –º–∞—Ä–∫–µ—Ä–æ–≤
5. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ UI
6. ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞" –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
7. ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω—ã–π `key` –≤ `RouteMapSwitcher` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
8. ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –≤–æ –≤—Å–µ—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö
9. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. üî¥ **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï:** –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ CSS –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
2. üî¥ **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï:** Race condition –º–µ–∂–¥—É —ç—Ñ—Ñ–µ–∫—Ç–æ–º –∑–∞–≥—Ä—É–∑–∫–∏ CSS –∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
3. üü° **–í–´–°–û–ö–û–ï:** –ó–∞–¥–µ—Ä–∂–∫–∞ 50ms –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
4. üü° **–í–´–°–û–ö–û–ï:** –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ CSS –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–ª—å—à–µ, —á–µ–º –Ω—É–∂–Ω–æ
5. üü° **–°–†–ï–î–ù–ï–ï:** –ö–Ω–æ–ø–∫–∞ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞" –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É CSS
6. üü° **–°–†–ï–î–ù–ï–ï:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ CSS

---

## 11. –í–´–í–û–î–´

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** Race condition –º–µ–∂–¥—É —ç—Ñ—Ñ–µ–∫—Ç–æ–º –∑–∞–≥—Ä—É–∑–∫–∏ CSS (—Å—Ç—Ä–æ–∫–∏ 163-188) –∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 204-356). –≠—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å `<link>` —ç–ª–µ–º–µ–Ω—Ç –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —ç—Ñ—Ñ–µ–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —É–∂–µ –∑–∞–ø—É—Å—Ç–∏–ª –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ CSS. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –¥—É–±–ª–∏–∫–∞—Ç `<link>` —ç–ª–µ–º–µ–Ω—Ç–∞.

**–í—Ç–æ—Ä–∏—á–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ó–∞–¥–µ—Ä–∂–∫–∞ 50ms –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –≤—ã–∑–æ–≤–æ–º `checkContainerSize()` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –ø–æ–ø—ã—Ç–∫–∞–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

### –¢–æ—á–Ω—ã–µ –º–µ—Å—Ç–∞ –ø—Ä–æ–±–ª–µ–º

1. **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 176-187 ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ `<link>` –±–µ–∑ –∑–∞—â–∏—Ç—ã –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
2. **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 217-249 ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ CSS –≤ —ç—Ñ—Ñ–µ–∫—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –∑–∞–≥—Ä—É–∑–∫–∏ CSS
3. **–í–´–°–û–ö–û–ï:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∞ 345 ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ 50ms –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π
4. **–°–†–ï–î–ù–ï–ï:** `route-map.tsx`, —Å—Ç—Ä–æ–∫–∏ 521-534 ‚Äî –∫–Ω–æ–ø–∫–∞ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞" –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É CSS

### –ö–∞–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

1. **–≠—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CSS (—Å—Ç—Ä–æ–∫–∏ 163-188):**
   - –ù–µ –∑–∞—â–∏—â—ë–Ω –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö
   - –ù–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

2. **–≠—Ñ—Ñ–µ–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 204-356):**
   - –ú–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ CSS, –¥–∞–∂–µ –µ—Å–ª–∏ CSS —É–∂–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º —ç—Ñ—Ñ–µ–∫—Ç–µ
   - –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç, —á—Ç–æ CSS –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

### –ß—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç Leaflet

1. **–î—É–±–ª–∏–∫–∞—Ç—ã CSS:**
   - –ú–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å—Ç–∏–ª–µ–π
   - –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ CSS –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–ª—å—à–µ, —á–µ–º –Ω—É–∂–Ω–æ
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–¥–µ—Ä–∂–∞—Ç—å—Å—è

2. **Race condition:**
   - –≠—Ñ—Ñ–µ–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–∂–µ—Ç –∂–¥–∞—Ç—å CSS, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
   - –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å 5 —Å–µ–∫—É–Ω–¥, –¥–∞–∂–µ –µ—Å–ª–∏ CSS —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω

3. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞:**
   - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –≥–æ—Ç–æ–≤ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ `checkContainerSize()`
   - –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –±–æ–ª—å—à–µ –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤

---

## 12. –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ CSS:**
   - –î–æ–±–∞–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º `<link>`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞

2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã:**
   - –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ CSS –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ CSS
   - –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ –∑–∞–≥—Ä—É–∑–∫–∏ CSS –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

3. **–£–ª—É—á—à–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
   - –£–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –¥–æ 100-150ms
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `requestAnimationFrame`

4. **–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑–∫–∏ CSS:**
   - –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞" —Å–±—Ä–æ—Å–∏—Ç—å `isLeafletCssLoaded`

---

## 13. –°–¢–ê–¢–£–° –ì–û–¢–û–í–ù–û–°–¢–ò

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

- ‚úÖ –¶–µ–ø–æ—á–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è Leaflet —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–æ–ª–∏–ª–∏–Ω–∏–π –∏ –º–∞—Ä–∫–µ—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- üî¥ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ CSS
- üî¥ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ CSS –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- üü° –£–ª—É—á—à–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### üìä –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** 85%  
**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:** 2  
**–í—ã—Å–æ–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:** 2  
**–°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:** 2

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –∫–∞—Ä—Ç–∞ Leaflet –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –Ω–∞ 100%.

---

## 14. –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ö–∞—Ä—Ç–∞ Leaflet –≤ —Ü–µ–ª–æ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–æ –µ—Å—Ç—å –¥–≤–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π CSS:

1. **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ CSS** –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
2. **Race condition** –º–µ–∂–¥—É —ç—Ñ—Ñ–µ–∫—Ç–æ–º –∑–∞–≥—Ä—É–∑–∫–∏ CSS –∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–≠—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∫–∞—Ä—Ç—ã –∏–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å—Ç–∏–ª–µ–π. –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º –∫–∞—Ä—Ç–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ.

–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã (—Ü–µ–ø–æ—á–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤) —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

